---
Test
---
!4 For enigma events object info, visit https://github.com/xadrnd/enigma_common/blob/master/event_model/src/main/proto

!3 build curl and impression link for testing 
!|com.groundtruth.test.Atlantic.Requestor.AdRequestor|${atlanticServerQA}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|testTitle                                  |testId|getAdResponse?|getHttpStatusCode?|getAdGroupId?|getCampaignId?|buildCurl?|getImpressionLink?|isGetQuery|browseEndPoint   |prefix              |postId   |appPublisherName |appId                           |displayManager|pt |latitude         |longitude          |zip  |size  |carrier|deviceType|bidfloor|bidfloorcur|ua                                                                                                                                                             |api|gender|yob |keywords                                           |
|build Curl for tests                       |0     |true          |200               |71986        |901           |$curl=    |$impressionLink=  |false     |${browseEndPoint}|${postPrefixMopub23}|testUser1|testAppPublisher1|203b3afe804311e295fa123138070049|mopdisplay    |app|47.60928699999999|-122.32465289999999|98104|320x50|310-410|1         |0.490   |USD        |Mozilla/5.0 (iPhone; CPU OS 7_1 like Mac OS X) ..TestSuite.Regression.ProductExchange.AppleWebKit/537.51.2 (KHTML, like Gecko) Mobile/11D167 Twitter for iPhone|3,5|m     |1977|m_age:37,interest:dating,ethnicity:african-american|

!3 Ad Request field verificatoin
!| com.groundtruth.test.Atlantic.Requestor.EnigmaEventsLogRequestor                                                                   |${atlanticServerQA}                                                                                                                                                                                                                                                    |
|testTitle                                                                                                                   |testId|getEnigmaEventsLog?|getFieldValue?                                                                                                                                                 |getAdGroupId?|getCampaignId?|timeout         |fieldToCheck            |curl |
|Fire adrequest, verify app_id from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad        |1     |true               |mopubexch411ws                                                                                                                                                 |71986        |901           |${timeoutEnigma}|AdRequest.app_id        |$curl|
|Fire adrequest, verify O_fmt from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad         |2     |true               |exp,html5                                                                                                                                                      |71986        |901           |${timeoutEnigma}|AdRequest.o_fmt         |$curl|
|Fire adrequest, verify req_ad_size from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad   |3     |true               |320x50                                                                                                                                                         |71986        |901           |${timeoutEnigma}|AdRequest.req_ad_size   |$curl|
|Fire adrequest, verify user_agent from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad    |4     |true               |Mozilla/5.0 (iPhone; CPU OS 7_1 like Mac OS X) ..TestSuite.Regression.ProductExchange.AppleWebKit/537.51.2 (KHTML, like Gecko) Mobile/11D167 Twitter for iPhone|71986        |901           |${timeoutEnigma}|AdRequest.user_agent    |$curl|
|Fire adrequest, verify sdk from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad           |5     |true               |mopdisplay                                                                                                                                                     |71986        |901           |${timeoutEnigma}|AdRequest.sdk           |$curl|
|Fire adrequest, verify request_filled from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad|6     |true               |FILLED                                                                                                                                                         |71986        |901           |${timeoutEnigma}|AdRequest.request_filled|$curl|
|Fire adrequest, verify pub_bid_floor from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad |7     |true               |0.49                                                                                                                                                           |71986        |901           |${timeoutEnigma}|AdRequest.pub_bid_floor |$curl|
|Fire adrequest, verify app_site_id from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad   |8     |true               |203b3afe804311e295fa123138070049                                                                                                                               |71986        |901           |${timeoutEnigma}|AdRequest.app_site_id   |$curl|
|Fire adrequest, verify HTTP_vendor from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad   |10    |true               |neptunenormandy                                                                                                                                                |71986        |901           |${timeoutEnigma}|AdDetails.HTTP_vendor   |$curl|
|Fire adrequest, verify listing_vendor from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad|11    |true               |neptune_direct                                                                                                                                                 |71986        |901           |${timeoutEnigma}|AdDetails.listing_vendor|$curl|

!3 Http Vendor Stats field verification
!| com.groundtruth.test.Atlantic.Requestor.EnigmaEventsLogRequestor                                                                                    |${atlanticServerQA}                                                                                                                    |
|testTitle                                                                                                                                    |testId|getEnigmaEventsLog?|getFieldValue?|getAdGroupId?|getCampaignId?|timeout         |fieldToCheck                             |curl |
|Fire adrequest, verify num_returned_from_vendor from enigma_event ..TestSuite.Regression.ProductExchange.HttpVendorStats--> Should return ad |12    |true               |1             |71986        |901           |${timeoutEnigma}|HttpVendorStats.num_returned_from_vendor |$curl|
|Fire adrequest, verify num_returned_to_publisher from enigma_event ..TestSuite.Regression.ProductExchange.HttpVendorStats--> Should return ad|13    |true               |1             |71986        |901           |${timeoutEnigma}|HttpVendorStats.num_returned_to_publisher|$curl|
|Fire adrequest, verify demand_bid_floor from enigma_event ..TestSuite.Regression.ProductExchange.AdRequest--> Should return ad               |9     |true               |4.9E-4        |71986        |901           |${timeoutEnigma}|HttpVendorStats.bid_floor                |$curl|

!3 Ad Details field verification
!| com.groundtruth.test.Atlantic.Requestor.EnigmaEventsLogRequestor                                                                 |${atlanticServerQA}                                                                                                  |
|testTitle                                                                                                                 |testId|getEnigmaEventsLog?|getFieldValue?|getAdGroupId?|getCampaignId?|timeout         |fieldToCheck           |curl |
|Fire adrequest, verify ad_id from enigma_event ..TestSuite.Regression.ProductExchange.AdDetails--> Should return ad       |14    |true               |71986         |71986        |901           |${timeoutEnigma}|AdDetails.ad_id        |$curl|
|Fire adrequest, verify adv bid rate from enigma_event ..TestSuite.Regression.ProductExchange.AdDetails--> Should return ad|15    |true               |0.01          |71986        |901           |${timeoutEnigma}|AdDetails.adv_bid_rates|$curl|
|Fire adrequest, verify pub bid rate from enigma_event ..TestSuite.Regression.ProductExchange.AdDetails--> Should return ad|16    |true               |0.02          |71986        |901           |${timeoutEnigma}|AdDetails.pub_bid_rates|$curl|
|Fire adrequest, verify campaign_id from enigma_event ..TestSuite.Regression.ProductExchange.AdDetails--> Should return ad |17    |true               |901           |71986        |901           |${timeoutEnigma}|AdDetails.campaign_id  |$curl|
|Fire adrequest, verify creative id from enigma_event ..TestSuite.Regression.ProductExchange.AdDetails--> Should return ad |18    |true               |71773         |71986        |901           |${timeoutEnigma}|AdDetails.creative_id  |$curl|
|Fire adrequest, verify adomain from enigma_event ..TestSuite.Regression.ProductExchange.AdDetails--> Should return ad     |19    |true               |atlantic.com  |71986        |901           |${timeoutEnigma}|AdDetails.adomain      |$curl|

#to do add winbid


!3 Ad Tracking Field Verification
!| com.groundtruth.test.Atlantic.Requestor.EnigmaEventsLogRequestor                                                                               |${atlanticServerQA}                                                                                  |
|testTitle                                                                                                                               |testId|getEnigmaEventsLog?|getFieldValue?|timeout         |fieldToCheck          |notificationLinkUrl|
|warm up                                                                                                                                 |21-0  |true               |AD_IMPRESSION |${timeoutEnigma}|AdTracking.action_type|$impressionLink    |
|Fire adrequest, verify action_type=AD_IMPRESSION from enigma_event ..TestSuite.Regression.ProductExchange.AdTracking--> Should return ad|21    |true               |AD_IMPRESSION |${timeoutEnigma}|AdTracking.action_type|$impressionLink    |
|Fire adrequest, verify xad_revenue from enigma_event ..TestSuite.Regression.ProductExchange.AdTracking--> Should return ad              |22    |true               |0.01          |${timeoutEnigma}|AdTracking.xad_revenue|$impressionLink    |

#to do add 23 24 to count AdDetails and Adtracking returned





